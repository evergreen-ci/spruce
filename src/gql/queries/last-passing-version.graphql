query LastPassingVersion(
  $variant: String!
  $projectId: String!
  $taskName: String!
) {
  mainlineCommits(
    options: { projectID: $projectId, limit: 1, shouldCollapse: true }
  ) {
    versions {
      version {
        id
        buildVariants(
          options: {
            statuses: ["success"]
            tasks: [$taskName]
            variants: [$variant]
          }
        ) {
          variant
          tasks {
            id
            execution
          }
        }
      }
    }
  }
}
